@page "/login"
@rendermode InteractiveServer


@inject NavigationManager Nav
@using MudBlazor

<PageTitle>Login</PageTitle>

<MudContainer MaxWidth="MaxWidth.Small" Class="mt-10">
    <MudPaper Elevation="4" Class="pa-6">

        <MudText Typo="Typo.h5" Class="mb-4">
            Sign in
        </MudText>

        @if (!string.IsNullOrEmpty(errorMessage))
        {
            <MudAlert Severity="Severity.Error" Class="mb-3">
                @errorMessage
            </MudAlert>
        }

        <MudTextField Label="Email"
                      @bind-Value="email"
                      InputType="InputType.Email"
                      Required="true"
                      Class="mb-3" />

        <MudTextField Label="Password"
                      @bind-Value="password"
                      InputType="InputType.Password"
                      Required="true"
                      Class="mb-4" />

        <MudButton Variant="Variant.Filled"
                   Color="Color.Primary"
                   FullWidth="true"
                   OnClick="LoginLogic">
            Login
        </MudButton>

    </MudPaper>
</MudContainer>

@code {
    private string email;
    private string password;
    private string errorMessage;

    void LoginLogic()
    {
        var url =
            $"/auth/login?email={Uri.EscapeDataString(email)}&password={Uri.EscapeDataString(password)}";

        Nav.NavigateTo(url, forceLoad: true);
    }

}
